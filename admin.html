<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BAZIGAR Admin | Firebase</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f0f2f5; text-align: center; }
        .box { background: white; padding: 20px; max-width: 400px; margin: auto; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        input { width: 90%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; }
        button { width: 95%; padding: 12px; background: #d0011b; color: white; border: none; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <div class="box">
        <h2>Add Live Product</h2>
        <input type="text" id="n" placeholder="Product Name">
        <input type="number" id="p" placeholder="Price (PKR)">
        <input type="file" id="i" accept="image/*">
        <button id="upBtn">UPLOAD TO STORE</button>
        <p id="st"></p>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDmen5qbKuVgG4OeViT_hcYVnEB6-oV6zc",
            authDomain: "dragonwallet-ad6bd.firebaseapp.com",
            projectId: "dragonwallet-ad6bd",
            storageBucket: "dragonwallet-ad6bd.firebasestorage.app",
            messagingSenderId: "1015976329368",
            appId: "1:1015976329368:web:6fa5c1ac3dc843b32c10ed"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.getElementById('upBtn').onclick = async () => {
            const name = document.getElementById('n').value;
            const price = document.getElementById('p').value;
            const file = document.getElementById('i').files[0];
            const st = document.getElementById('st');

            if(!name || !price || !file) return alert("Fill all!");

            st.innerText = "Uploading...";
            const reader = new FileReader();
            reader.onload = async (e) => {
                await addDoc(collection(db, "products"), {
                    name, price, image: e.target.result, createdAt: Date.now()
                });
                st.innerText = "âœ… Done! Product is LIVE.";
            };
            reader.readAsDataURL(file);
        };
    </script>
</body>
</html>
